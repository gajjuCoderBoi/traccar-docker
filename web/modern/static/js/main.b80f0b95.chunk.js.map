{"version":3,"sources":["store/session.js","store/devices.js","store/positions.js","store/index.js","common/localization.js","RemoveDialog.js","DeviceList.js","mapManager.js","MainMap.js","MainToolbar.js","MainPage.js","LoginPage.js","common/formatter.js","reports/RouteReportPage.js","DevicePage.js","SocketController.js","App.js","serviceWorker.js","index.js"],"names":["createSlice","name","initialState","authenticated","reducers","state","action","payload","reducer","actions","items","selectedId","update","forEach","item","select","id","remove","combineReducers","session","devices","positions","configureStore","supportedLanguages","data","af","ar","az","bg","bn","cs","de","da","el","en","es","fa","fi","fr","he","hi","hr","hu","it","ja","ka","kk","km","languages","undefined","window","navigator","slice","language","userLanguage","push","substring","i","length","replace","selectedLanguage","key","RemoveDialog","props","Dialog","open","onClose","onResult","DialogContent","DialogContentText","t","DialogActions","Button","color","onClick","fetch","deviceId","method","then","response","ok","autoFocus","useStyles","makeStyles","theme","list","maxHeight","overflow","fab","position","bottom","spacing","right","DeviceList","useState","menuDeviceId","setMenuDeviceId","menuAnchorEl","setMenuAnchorEl","removeDialogOpen","setRemoveDialogOpen","useSelector","Object","values","dispatch","useDispatch","classes","history","useHistory","handleMenuClose","List","className","map","device","index","ListItem","button","devicesActions","ListItemAvatar","Avatar","ListItemText","primary","secondary","uniqueId","ListItemSecondaryAction","IconButton","event","currentTarget","handleMenuClick","Divider","Fab","size","Menu","anchorEl","keepMounted","Boolean","MenuItem","removed","ready","registeredListener","loadImage","url","Promise","imageLoaded","image","Image","onload","src","loadIcon","background","canvas","document","createElement","width","devicePixelRatio","height","style","context","getContext","drawImage","imageWidth","imageHeight","addImage","getImageData","pixelRatio","element","mapboxgl","Map","container","center","zoom","addControl","NavigationControl","on","all","registerListener","listener","addLayer","source","icon","text","layer","layout","paint","calculateBounds","features","first","geometry","coordinates","bounds","feature","longitude","latitude","MainMap","containerEl","useRef","mapReady","setMapReady","mapCenter","createFeature","type","properties","useLayoutEffect","currentEl","current","appendChild","mapManager","resize","removeChild","useEffect","addSource","fitBounds","padding","maxZoom","removeLayer","removeSource","easeTo","getSource","setData","ref","flex","flexGrow","appBar","zIndex","drawer","menuButton","marginLeft","marginRight","MainToolbar","setDrawer","closeDrawer","AppBar","Toolbar","Typography","variant","sessionActions","Drawer","tabIndex","role","onKeyDown","ListItemIcon","subheader","ListSubheader","disabled","root","display","flexDirection","content","breakpoints","down","drawerPaper","up","mapContainer","withWidth","anchor","isWidthUp","paper","LinearProgress","marginTop","alignItems","logo","buttons","justifyContent","flexBasis","LoginPage","failed","setFailed","email","setEmail","password","setPassword","Paper","alt","onSubmit","preventDefault","body","URLSearchParams","TextField","margin","required","fullWidth","error","label","value","autoComplete","onChange","target","helperText","FormControl","formatValue","moment","format","toFixed","object","form","RouteReportPage","setDeviceId","period","setPeriod","subtract","from","setFrom","to","setTo","Grid","xs","md","lg","InputLabel","Select","e","HTML5_FMT","DATETIME_LOCAL","selectedFrom","selectedTo","startOf","endOf","query","toISOString","toString","headers","json","TableContainer","component","Table","TableHead","TableRow","TableCell","TableBody","formatter","DevicePage","useParams","setDevice","setName","setUniqueId","Container","maxWidth","defaultValue","goBack","updatedDevice","JSON","stringify","connect","connectSocket","protocol","location","socket","WebSocket","host","onclose","setTimeout","onmessage","parse","positionsActions","events","displayNotifications","Notification","permission","notification","close","bind","requestPermission","App","CssBaseline","exact","path","MainPage","isLocalhost","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","ReactDOM","render","store","getElementById","URL","process","href","origin","addEventListener","contentType","get","status","indexOf","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.b80f0b95.chunk.js","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nconst { reducer, actions } = createSlice({\n  name: 'session',\n  initialState: {\n    authenticated: false,\n  },\n  reducers: {\n    authenticated(state, action) {\n      state.authenticated = action.payload;\n    },\n  }\n});\n\nexport { actions as sessionActions };\nexport { reducer as sessionReducer };\n","import { createSlice } from '@reduxjs/toolkit';\n\nconst { reducer, actions } = createSlice({\n  name: 'devices',\n  initialState: {\n    items: {},\n    selectedId: null\n  },\n  reducers: {\n    update(state, action) {\n      action.payload.forEach(item => state.items[item['id']] = item);\n    },\n    select(state, action) {\n      state.selectedId = action.payload.id;\n    },\n    remove(state, action) {\n      delete state.items[action.payload];\n    },\n  }\n});\n\nexport { actions as devicesActions };\nexport { reducer as devicesReducer };\n","import { createSlice } from '@reduxjs/toolkit';\n\nconst { reducer, actions } = createSlice({\n  name: 'positions',\n  initialState: {\n    items: {},\n  },\n  reducers: {\n    update(state, action) {\n      action.payload.forEach(item => state.items[item['deviceId']] = item);\n    },\n  }\n});\n\nexport { actions as positionsActions };\nexport { reducer as positionsReducer };\n","import { combineReducers, configureStore } from '@reduxjs/toolkit';\n\nimport { sessionReducer as session } from './session';\nimport { devicesReducer as devices } from './devices';\nimport { positionsReducer as positions } from './positions';\n\nconst reducer = combineReducers({\n  session,\n  devices,\n  positions,\n});\n\nexport { sessionActions } from './session';\nexport { devicesActions } from './devices';\nexport { positionsActions } from './positions';\n\nexport default configureStore({ reducer });\n","import af from '../../../web/l10n/af.json';\nimport ar from '../../../web/l10n/ar.json';\nimport az from '../../../web/l10n/az.json';\nimport bg from '../../../web/l10n/bg.json';\nimport bn from '../../../web/l10n/bn.json';\nimport cs from '../../../web/l10n/cs.json';\nimport da from '../../../web/l10n/da.json';\nimport de from '../../../web/l10n/de.json';\nimport el from '../../../web/l10n/el.json';\nimport en from '../../../web/l10n/en.json';\nimport es from '../../../web/l10n/es.json';\nimport fa from '../../../web/l10n/fa.json';\nimport fi from '../../../web/l10n/fi.json';\nimport fr from '../../../web/l10n/fr.json';\nimport he from '../../../web/l10n/he.json';\nimport hi from '../../../web/l10n/hi.json';\nimport hr from '../../../web/l10n/hr.json';\nimport hu from '../../../web/l10n/hu.json';\nimport id from '../../../web/l10n/id.json';\nimport it from '../../../web/l10n/it.json';\nimport ja from '../../../web/l10n/ja.json';\nimport ka from '../../../web/l10n/ka.json';\nimport kk from '../../../web/l10n/kk.json';\nimport km from '../../../web/l10n/km.json';\nimport ko from '../../../web/l10n/ko.json';\nimport lo from '../../../web/l10n/lo.json';\nimport lt from '../../../web/l10n/lt.json';\nimport lv from '../../../web/l10n/lv.json';\nimport ml from '../../../web/l10n/ml.json';\nimport ms from '../../../web/l10n/ms.json';\nimport nb from '../../../web/l10n/nb.json';\nimport ne from '../../../web/l10n/ne.json';\nimport nl from '../../../web/l10n/nl.json';\nimport nn from '../../../web/l10n/nn.json';\nimport pl from '../../../web/l10n/pl.json';\nimport pt from '../../../web/l10n/pt.json';\nimport pt_BR from '../../../web/l10n/pt_BR.json';\nimport ro from '../../../web/l10n/ro.json';\nimport ru from '../../../web/l10n/ru.json';\nimport si from '../../../web/l10n/si.json';\nimport sk from '../../../web/l10n/sk.json';\nimport sl from '../../../web/l10n/sl.json';\nimport sq from '../../../web/l10n/sq.json';\nimport sr from '../../../web/l10n/sr.json';\nimport sv from '../../../web/l10n/sv.json';\nimport ta from '../../../web/l10n/ta.json';\nimport th from '../../../web/l10n/th.json';\nimport tr from '../../../web/l10n/tr.json';\nimport uk from '../../../web/l10n/uk.json';\nimport uz from '../../../web/l10n/uz.json';\nimport vi from '../../../web/l10n/vi.json';\nimport zh from '../../../web/l10n/zh.json';\nimport zh_TW from '../../../web/l10n/zh_TW.json';\n\nconst supportedLanguages = {\n    'af': { data: af, name: 'Afrikaans' },\n    'ar': { data: ar, name: 'العربية' },\n    'az': { data: az, name: 'Azərbaycanca' },\n    'bg': { data: bg, name: 'Български' },\n    'bn': { data: bn, name: 'বাংলা' },\n    'cs': { data: cs, name: 'Čeština' },\n    'de': { data: de, name: 'Deutsch' },\n    'da': { data: da, name: 'Dansk' },\n    'el': { data: el, name: 'Ελληνικά' },\n    'en': { data: en, name: 'English' },\n    'es': { data: es, name: 'Español' },\n    'fa': { data: fa, name: 'فارسی' },\n    'fi': { data: fi, name: 'Suomi' },\n    'fr': { data: fr, name: 'Français' },\n    'he': { data: he, name: 'עברית' },\n    'hi': { data: hi, name: 'हिन्दी' },\n    'hr': { data: hr, name: 'Hrvatski' },\n    'hu': { data: hu, name: 'Magyar' },\n    'id': { data: id, name: 'Bahasa Indonesia' },\n    'it': { data: it, name: 'Italiano' },\n    'ja': { data: ja, name: '日本語' },\n    'ka': { data: ka, name: 'ქართული' },\n    'kk': { data: kk, name: 'Қазақша' },\n    'ko': { data: ko, name: '한국어' },\n    'km': { data: km, name: 'ភាសាខ្មែរ' },\n    'lo': { data: lo, name: 'ລາວ' },\n    'lt': { data: lt, name: 'Lietuvių' },\n    'lv': { data: lv, name: 'Latviešu' },\n    'ml': { data: ml, name: 'മലയാളം' },\n    'ms': { data: ms, name: 'بهاس ملايو' },\n    'nb': { data: nb, name: 'Norsk bokmål' },\n    'ne': { data: ne, name: 'नेपाली' },\n    'nl': { data: nl, name: 'Nederlands' },\n    'nn': { data: nn, name: 'Norsk nynorsk' },\n    'pl': { data: pl, name: 'Polski' },\n    'pt': { data: pt, name: 'Português' },\n    'pt_BR': { data: pt_BR, name: 'Português (Brasil)' },\n    'ro': { data: ro, name: 'Română' },\n    'ru': { data: ru, name: 'Русский' },\n    'si': { data: si, name: 'සිංහල' },\n    'sk': { data: sk, name: 'Slovenčina' },\n    'sl': { data: sl, name: 'Slovenščina' },\n    'sq': { data: sq, name: 'Shqipëria' },\n    'sr': { data: sr, name: 'Srpski' },\n    'sv': { data: sv, name: 'Svenska' },\n    'ta': { data: ta, name: 'தமிழ்' },\n    'th': { data: th, name: 'ไทย' },\n    'tr': { data: tr, name: 'Türkçe' },\n    'uk': { data: uk, name: 'Українська' },\n    'uz': { data: uz, name: 'Oʻzbekcha' },\n    'vi': { data: vi, name: 'Tiếng Việt' },\n    'zh': { data: zh, name: '中文' },\n    'zh_TW': { data: zh_TW, name: '中文 (Taiwan)' }\n};\n\nconst languages = window.navigator.languages !== undefined ? window.navigator.languages.slice() : [];\nlet language = window.navigator.userLanguage || window.navigator.language;\nlanguages.push(language);\nlanguages.push(language.substring(0, 2));\nlanguages.push('en');\nfor (let i = 0; i < languages.length; i++) {\n    language = languages[i].replace('-', '_');\n    if (language in supportedLanguages) {\n        break;\n    }\n    if (language.length > 2) {\n        language = languages[i].substring(0, 2);\n        if (language in supportedLanguages) {\n            break;\n        }\n    }\n}\n\nconst selectedLanguage = supportedLanguages[language];\n\nexport default key => {\n    return selectedLanguage.data[key]\n};\n","import t from './common/localization'\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\n\nconst RemoveDialog = (props) => {\n  const handleRemove = () => {\n    fetch(`/api/devices/${props.deviceId}`, { method: 'DELETE' }).then(response => {\n      if (response.ok) {\n        props.onResult(true);\n      }\n    });\n  }\n\n  return (\n    <>\n      <Dialog\n        open={props.open}\n        onClose={() => { props.onResult(false) }}>\n        <DialogContent>\n          <DialogContentText>{t('sharedRemoveConfirm')}</DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button color=\"primary\" onClick={handleRemove}>{t('sharedRemove')}</Button>\n          <Button autoFocus onClick={() => props.onResult(false)}>{t('sharedCancel')}</Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n};\n\nexport default RemoveDialog;\n","import React, { Fragment, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useHistory } from 'react-router-dom';\nimport Avatar from '@material-ui/core/Avatar';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport { devicesActions } from './store';\nimport t from './common/localization';\nimport RemoveDialog from './RemoveDialog';\n\nconst useStyles = makeStyles(theme => ({\n  list: {\n    maxHeight: '100%',\n    overflow: 'auto',\n  },\n  fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n}));\n\nconst DeviceList = () => {\n  const [menuDeviceId, setMenuDeviceId] = useState(null);\n  const [menuAnchorEl, setMenuAnchorEl] = useState(null);\n  const [removeDialogOpen, setRemoveDialogOpen] = useState(false);\n  const devices = useSelector(state => Object.values(state.devices.items));\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const history = useHistory();\n\n  const handleMenuClick = (event, deviceId) => {\n    setMenuDeviceId(deviceId);\n    setMenuAnchorEl(event.currentTarget);\n  }\n\n  const handleMenuClose = () => {\n    setMenuAnchorEl(null);\n  }\n\n  const handleMenuEdit = () => {\n    history.push(`/device/${menuDeviceId}`);\n    handleMenuClose();\n  }\n\n  const handleMenuRemove = () => {\n    setRemoveDialogOpen(true);\n    handleMenuClose();\n  }\n\n  const handleAdd = () => {\n    history.push('/device');\n    handleMenuClose();\n  }\n\n  const handleRemoveResult = (removed) => {\n    setRemoveDialogOpen(false);\n    if (removed) {\n      dispatch(devicesActions.remove(menuDeviceId));\n    }\n  }\n\n  return (\n    <>\n      <List className={classes.list}>\n        {devices.map((device, index, list) => (\n          <Fragment key={device.id}>\n            <ListItem button key={device.id} onClick={() => dispatch(devicesActions.select(device))}>\n              <ListItemAvatar>\n                <Avatar>\n                  <LocationOnIcon />\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText primary={device.name} secondary={device.uniqueId} />\n              <ListItemSecondaryAction>\n                <IconButton onClick={(event) => handleMenuClick(event, device.id)}>\n                  <MoreVertIcon />\n                </IconButton>\n              </ListItemSecondaryAction>\n            </ListItem>\n            {index < list.length - 1 ? <Divider /> : null}\n          </Fragment>\n        ))}\n      </List>\n      <Fab size=\"medium\" color=\"primary\" className={classes.fab} onClick={handleAdd}>\n        <AddIcon />\n      </Fab>\n      <Menu id=\"device-menu\" anchorEl={menuAnchorEl} keepMounted open={Boolean(menuAnchorEl)} onClose={handleMenuClose}>\n        <MenuItem onClick={handleMenuEdit}>{t('sharedEdit')}</MenuItem>\n        <MenuItem onClick={handleMenuRemove}>{t('sharedRemove')}</MenuItem>\n      </Menu>\n      <RemoveDialog deviceId={menuDeviceId} open={removeDialogOpen} onResult={handleRemoveResult} />\n    </>\n  );\n}\n\nexport default DeviceList;\n","import 'mapbox-gl/dist/mapbox-gl.css';\nimport mapboxgl from 'mapbox-gl';\n\nlet ready = false;\nlet registeredListener = null;\n\nconst registerListener = listener => {\n  if (ready) {\n    listener();\n  } else {\n    registeredListener = listener;\n  }\n};\n\nconst loadImage = (url) => {\n  return new Promise(imageLoaded => {\n    const image = new Image();\n    image.onload = () => imageLoaded(image);\n    image.src = url;\n  });\n};\n\nconst loadIcon = (key, background, url) => {\n  return loadImage(url).then((image) => {\n    const canvas = document.createElement('canvas');\n    canvas.width = background.width * window.devicePixelRatio;\n    canvas.height = background.height * window.devicePixelRatio;\n    canvas.style.width = `${background.width}px`;\n    canvas.style.height = `${background.height}px`;\n    const context = canvas.getContext('2d');\n    context.drawImage(background, 0, 0, canvas.width, canvas.height);\n\n    const imageWidth = image.width * window.devicePixelRatio;\n    const imageHeight = image.height * window.devicePixelRatio;\n    context.drawImage(image, (canvas.width - imageWidth) / 2, (canvas.height - imageHeight) / 2, imageWidth, imageHeight);\n\n    map.addImage(key, context.getImageData(0, 0, canvas.width, canvas.height), {\n      pixelRatio: window.devicePixelRatio\n    });\n  });\n};\n\nconst addLayer = (id, source, icon, text) => {\n  const layer = {\n    'id': id,\n    'type': 'symbol',\n    'source': source,\n    'layout': {\n      'icon-image': icon,\n      'icon-allow-overlap': true,\n    },\n  };\n  if (text) {\n    layer.layout = {\n      ...layer.layout,\n      'text-field': text,\n      'text-allow-overlap': true,\n      'text-anchor': 'bottom',\n      'text-offset': [0, -2],\n      'text-font': ['Roboto Regular'],\n      'text-size': 12,\n    }\n    layer.paint = {\n      'text-halo-color': 'white',\n      'text-halo-width': 1,\n    }\n  }\n  map.addLayer(layer);\n}\n\nconst calculateBounds = features => {\n  if (features && features.length) {\n    const first = features[0].geometry.coordinates;\n    const bounds = [[...first], [...first]];\n    for (let feature of features) {\n      const longitude = feature.geometry.coordinates[0]\n      const latitude = feature.geometry.coordinates[1]\n      if (longitude < bounds[0][0]) {\n        bounds[0][0] = longitude;\n      } else if (longitude > bounds[1][0]) {\n        bounds[1][0] = longitude;\n      }\n      if (latitude < bounds[0][1]) {\n        bounds[0][1] = latitude;\n      } else if (latitude > bounds[1][1]) {\n        bounds[1][1] = latitude;\n      }\n    }\n    return bounds;\n  } else {\n    return null;\n  }\n}\n\nconst element = document.createElement('div');\nelement.style.width = '100%';\nelement.style.height = '100%';\n\n/*map = new mapboxgl.Map({\n  container: this.mapContainer,\n  style: 'https://cdn.traccar.com/map/basic.json',\n  center: [0, 0],\n  zoom: 1\n});*/\n\nconst map = new mapboxgl.Map({\n  container: element,\n  style: {\n    'version': 8,\n    'sources': {\n      'raster-tiles': {\n        'type': 'raster',\n        'tiles': [\n            'https://a.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png',\n            'https://b.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png',\n            'https://c.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png',\n            'https://d.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png'\n        ],\n        'tileSize': 256,\n        'attribution': '© <a target=\"_top\" rel=\"noopener\" href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, © <a target=\"_top\" rel=\"noopener\" href=\"https://carto.com/attribution\">CARTO</a>'\n      }\n    },\n    'glyphs': 'https://cdn.traccar.com/map/fonts/{fontstack}/{range}.pbf',\n    'layers': [\n      {\n        'id': 'simple-tiles',\n        'type': 'raster',\n        'source': 'raster-tiles',\n        'minzoom': 0,\n        'maxzoom': 22\n      }\n    ]\n  },\n  center: [0, 0],\n  zoom: 1\n});\n\nmap.addControl(new mapboxgl.NavigationControl());\n\nmap.on('load', () => {\n\n  loadImage('images/background.svg').then((background) => {\n    Promise.all([\n      loadIcon('icon-marker', background, 'images/icon/marker.svg')\n    ]).then(() => {\n      ready = true;\n      if (registeredListener) {\n        registeredListener();\n        registeredListener = null;\n      }\n    });\n  });\n});\n\nexport default {\n  element,\n  map,\n  registerListener,\n  addLayer,\n  calculateBounds,\n};\n","import React, { useRef, useLayoutEffect, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport mapManager from './mapManager';\n\nconst MainMap = () => {\n  const containerEl = useRef(null);\n\n  const [mapReady, setMapReady] = useState(false);\n\n  const mapCenter = useSelector(state => {\n    if (state.devices.selectedId) {\n      const position = state.positions.items[state.devices.selectedId] || null;\n      if (position) {\n        return [position.longitude, position.latitude];\n      }\n    }\n    return null;\n  });\n  \n  const createFeature = (state, position) => {\n    const device = state.devices.items[position.deviceId] || null;\n    return {\n      name: device ? device.name : '',\n    }\n  };\n  \n  const positions = useSelector(state => ({\n    type: 'FeatureCollection',\n    features: Object.values(state.positions.items).map(position => ({\n      type: 'Feature',\n      geometry: {\n        type: 'Point',\n        coordinates: [position.longitude, position.latitude]\n      },\n      properties: createFeature(state, position),\n    })),\n  }));\n  \n  useLayoutEffect(() => {\n    const currentEl = containerEl.current;\n    currentEl.appendChild(mapManager.element);\n    if (mapManager.map) {\n      mapManager.map.resize();\n    }\n    return () => {\n      currentEl.removeChild(mapManager.element);\n    };\n  }, [containerEl]);\n\n  useEffect(() => {\n    mapManager.registerListener(() => setMapReady(true));\n  }, []);\n\n  useEffect(() => {\n    if (mapReady) {\n      mapManager.map.addSource('positions', {\n        'type': 'geojson',\n        'data': positions,\n      });\n      mapManager.addLayer('device-icon', 'positions', 'icon-marker', '{name}');\n\n      const bounds = mapManager.calculateBounds(positions.features);\n      if (bounds) {\n        mapManager.map.fitBounds(bounds, {\n          padding: 100,\n          maxZoom: 9\n        });\n      }\n\n      return () => {\n        mapManager.map.removeLayer('device-icon');\n        mapManager.map.removeSource('positions');\n      };\n    }\n  }, [mapReady]);\n\n  useEffect(() => {\n    mapManager.map.easeTo({\n      center: mapCenter\n    });\n  }, [mapCenter]);\n\n  useEffect(() => {\n    const source = mapManager.map.getSource('positions');\n    if (source) {\n      source.setData(positions);\n    }\n  }, [positions]);\n\n  const style = {\n    width: '100%',\n    height: '100%',\n  };\n\n  return <div style={style} ref={containerEl} />;\n}\n\nexport default MainMap;\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useDispatch } from 'react-redux';\nimport { sessionActions } from './store';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport DashboardIcon from '@material-ui/icons/Dashboard';\nimport BarChartIcon from '@material-ui/icons/BarChart';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport t from './common/localization';\n\nconst useStyles = makeStyles(theme => ({\n  flex: {\n    flexGrow: 1\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  list: {\n    width: 250\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20,\n  },\n}));\n\nconst MainToolbar = () => {\n  const dispatch = useDispatch();\n  const [drawer, setDrawer] = useState(false);\n  const classes = useStyles();\n  const history = useHistory();\n\n  const openDrawer = () => { setDrawer(true) }\n  const closeDrawer = () => { setDrawer(false) }\n\n  const handleLogout = () => {\n    fetch('/api/session', { method: 'DELETE' }).then(response => {\n      if (response.ok) {\n        dispatch(sessionActions.authenticated(false));\n        history.push('/login');\n      }\n    })\n  }\n\n  return (\n    <>\n      <AppBar position=\"static\" className={classes.appBar}>\n        <Toolbar>\n          <IconButton\n            className={classes.menuButton}\n            color=\"inherit\"\n            onClick={openDrawer}>\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.flex}>\n            Traccar\n        </Typography>\n          <Button color=\"inherit\" onClick={handleLogout}>{t('loginLogout')}</Button>\n        </Toolbar>\n      </AppBar>\n      <Drawer open={drawer} onClose={closeDrawer}>\n        <div\n          tabIndex={0}\n          className={classes.list}\n          role=\"button\"\n          onClick={closeDrawer}\n          onKeyDown={closeDrawer}>\n          <List>\n            <ListItem button onClick={() => history.push('/')}>\n              <ListItemIcon>\n                <DashboardIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('mapTitle')} />\n            </ListItem>\n          </List>\n          <Divider />\n          <List\n            subheader={\n              <ListSubheader>\n                {t('reportTitle')}\n              </ListSubheader>\n            }>\n            <ListItem button onClick={() => { history.push('/reports/route') }}>\n              <ListItemIcon>\n                <BarChartIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportRoute')} />\n            </ListItem>\n            <ListItem button disabled>\n              <ListItemIcon>\n                <BarChartIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportEvents')} />\n            </ListItem>\n            <ListItem button disabled>\n              <ListItemIcon>\n                <BarChartIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportTrips')} />\n            </ListItem>\n            <ListItem button disabled>\n              <ListItemIcon>\n                <BarChartIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportStops')} />\n            </ListItem>\n            <ListItem button disabled>\n              <ListItemIcon>\n                <BarChartIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportSummary')} />\n            </ListItem>\n            <ListItem button disabled>\n              <ListItemIcon>\n                <BarChartIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportChart')} />\n            </ListItem>\n          </List>\n          <Divider />\n          <List\n            subheader={\n              <ListSubheader>\n                {t('settingsTitle')}\n              </ListSubheader>\n            }>\n            <ListItem button disabled>\n              <ListItemIcon>\n                <SettingsIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('settingsUser')} />\n            </ListItem>\n            <ListItem button disabled>\n              <ListItemIcon>\n                <SettingsIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('settingsServer')} />\n            </ListItem>\n            <ListItem button disabled>\n              <ListItemIcon>\n                <SettingsIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('sharedNotifications')} />\n            </ListItem>\n          </List>\n        </div>\n      </Drawer>\n    </>\n  );\n}\n\nexport default MainToolbar;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { isWidthUp, makeStyles, withWidth } from '@material-ui/core';\nimport Drawer from '@material-ui/core/Drawer';\nimport ContainerDimensions from 'react-container-dimensions';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport DeviceList from './DeviceList';\nimport MainMap from './MainMap';\nimport MainToobar from './MainToolbar';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  content: {\n    flexGrow: 1,\n    overflow: 'hidden',\n    display: 'flex',\n    flexDirection: 'row',\n    [theme.breakpoints.down('xs')]: {\n      flexDirection: 'column-reverse',\n    }\n  },\n  drawerPaper: {\n    position: 'relative',\n    [theme.breakpoints.up('sm')]: {\n      width: 350,\n    },\n    [theme.breakpoints.down('xs')]: {\n      height: 250,\n    }\n  },\n  mapContainer: {\n    flexGrow: 1,\n  },\n}));\n\nconst MainPage = ({ width }) => {\n  const authenticated = useSelector(state => state.session.authenticated);\n  const classes = useStyles();\n\n  return !authenticated ? (<LinearProgress />) : (\n    <div className={classes.root}>\n      <MainToobar />\n      <div className={classes.content}>\n        <Drawer\n          anchor={isWidthUp('sm', width) ? 'left' : 'bottom'}\n          variant='permanent'\n          classes={{ paper: classes.drawerPaper }}>\n          <DeviceList />\n        </Drawer>\n        <div className={classes.mapContainer}>\n          <ContainerDimensions>\n            <MainMap />\n          </ContainerDimensions>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default withWidth()(MainPage);\n","import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { sessionActions } from './store';\nimport Button from '@material-ui/core/Button';\nimport FormControl from '@material-ui/core/FormControl';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\n\nimport t from './common/localization';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: 'auto',\n    marginLeft: theme.spacing(3),\n    marginRight: theme.spacing(3),\n    [theme.breakpoints.up(400 + theme.spacing(3 * 2))]: {\n      width: 400,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n    },\n  },\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    padding: theme.spacing(3),\n  },\n  logo: {\n    marginTop: theme.spacing(2)\n  },\n  buttons: {\n    marginTop: theme.spacing(1),\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    '& > *': {\n      flexBasis: '40%',\n    },\n  },\n}));\n\nconst LoginPage = () => {\n  const dispatch = useDispatch();\n\n  const [failed, setFailed] = useState(false);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const classes = useStyles();\n  const history = useHistory();\n\n  const handleEmailChange = (event) => {\n    setEmail(event.target.value);\n  }\n\n  const handlePasswordChange = (event) => {\n    setPassword(event.target.value);\n  }\n\n  const handleRegister = () => {\n    // TODO: Implement registration\n  }\n\n  const handleLogin = (event) => {\n    event.preventDefault();\n    fetch('/api/session', { method: 'POST', body: new URLSearchParams(`email=${email}&password=${password}`) }).then(response => {\n      if (response.ok) {\n        dispatch(sessionActions.authenticated(true));\n        history.push('/');\n      } else {\n        setFailed(true);\n        setPassword('');\n      }\n    });\n  }\n\n  return (\n    <main className={classes.root}>\n      <Paper className={classes.paper}>\n        <img className={classes.logo} src='/logo.svg' alt='Traccar' />\n        <form onSubmit={handleLogin}>\n\n          <TextField\n            margin='normal'\n            required\n            fullWidth\n            error={failed}\n            label={t('userEmail')}\n            name='email'\n            value={email}\n            autoComplete='email'\n            autoFocus\n            onChange={handleEmailChange}\n            helperText={failed && 'Invalid username or password'} />\n\n          <TextField\n            margin='normal'\n            required\n            fullWidth\n            error={failed}\n            label={t('userPassword')}\n            name='password'\n            value={password}\n            type='password'\n            autoComplete='current-password'\n            onChange={handlePasswordChange} />\n\n          <FormControl fullWidth margin='normal'>\n            <div className={classes.buttons}>\n              <Button type='button' variant='contained' disabled onClick={handleRegister}>\n                {t('loginRegister')}\n              </Button>\n              <Button type='submit' variant='contained' color='primary' disabled={!email || !password}>\n                {t('loginLogin')}\n              </Button>\n            </div>\n          </FormControl>\n        </form>\n      </Paper>\n    </main>\n  );\n}\n\nexport default LoginPage;\n","import moment from 'moment';\n\nconst formatValue = (key, value) => {\n  switch (key) {\n    case 'fixTime':\n      return moment(value).format('LLL');\n    case 'latitude':\n    case 'longitude':\n      return value.toFixed(5);\n    case 'speed':\n      return value.toFixed(1);\n    default:\n      return value;\n  }\n}\n\nexport default (object, key) => {\n  if (object != null && typeof object == 'object') {\n    return formatValue(key, object[key]);\n  } else {\n    return formatValue(key, object);\n  }\n};\n","import React, { useState } from 'react';\nimport MainToobar from '../MainToolbar';\nimport { useHistory } from 'react-router-dom';\nimport { Grid, TableContainer, Table, TableRow, TableCell, TableHead, TableBody, Paper, makeStyles, FormControl, InputLabel, Select, MenuItem, Button, TextField } from '@material-ui/core';\nimport t from '../common/localization';\nimport { useSelector } from 'react-redux';\nimport moment from 'moment';\nimport formatter from '../common/formatter';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  content: {\n    flex: 1,\n    overflow: 'auto',\n    padding: theme.spacing(2),\n  },\n  form: {\n    padding: theme.spacing(1, 2, 2),\n  },\n}));\n\nconst RouteReportPage = () => {\n  const history = useHistory();\n  const classes = useStyles();\n  const devices = useSelector(state => Object.values(state.devices.items));\n  const [deviceId, setDeviceId] = useState();\n  const [period, setPeriod] = useState('today');\n  const [from, setFrom] = useState(moment().subtract(1, 'hour'));\n  const [to, setTo] = useState(moment());\n  const [data, setData] = useState([]);\n\n  const handleShow = () => {\n    let selectedFrom;\n    let selectedTo;\n    switch (period) {\n      case 'today':\n        selectedFrom = moment().startOf('day');\n        selectedTo = moment().endOf('day');\n        break;\n      case 'yesterday':\n        selectedFrom = moment().subtract(1, 'day').startOf('day');\n        selectedTo = moment().subtract(1, 'day').endOf('day');\n        break;\n      case 'thisWeek':\n        selectedFrom = moment().startOf('week');\n        selectedTo = moment().endOf('week');\n        break;\n      case 'previousWeek':\n        selectedFrom = moment().subtract(1, 'week').startOf('week');\n        selectedTo = moment().subtract(1, 'week').endOf('week');\n        break;\n      case 'thisMonth':\n        selectedFrom = moment().startOf('month');\n        selectedTo = moment().endOf('month');\n        break;\n      case 'previousMonth':\n        selectedFrom = moment().subtract(1, 'month').startOf('month');\n        selectedTo = moment().subtract(1, 'month').endOf('month');\n        break;\n      default:\n        selectedFrom = from;\n        selectedTo = to;\n        break;\n    }\n    const query = new URLSearchParams({\n      deviceId,\n      from: selectedFrom.toISOString(),\n      to: selectedTo.toISOString(),\n    });\n    fetch(`/api/reports/route?${query.toString()}`, { headers: { 'Accept': 'application/json' } })\n      .then(response => {\n        if (response.ok) {\n          response.json().then(setData);\n        }\n      });\n  }\n\n  return (\n    <div className={classes.root}>\n      <MainToobar history={history} />\n      <div className={classes.content}>\n        <Grid container spacing={2}>\n          <Grid item xs={12} md={3} lg={2}>\n            <Paper className={classes.form}>\n              <FormControl variant='filled' margin='normal' fullWidth>\n                <InputLabel>{t('reportDevice')}</InputLabel>\n                <Select value={deviceId} onChange={(e) => setDeviceId(e.target.value)}>\n                  {devices.map((device) => (\n                    <MenuItem value={device.id}>{device.name}</MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n              <FormControl variant='filled' margin='normal' fullWidth>\n                <InputLabel>{t('reportPeriod')}</InputLabel>\n                <Select value={period} onChange={(e) => setPeriod(e.target.value)}>\n                  <MenuItem value='today'>{t('reportToday')}</MenuItem>\n                  <MenuItem value='yesterday'>{t('reportYesterday')}</MenuItem>\n                  <MenuItem value='thisWeek'>{t('reportThisWeek')}</MenuItem>\n                  <MenuItem value='previousWeek'>{t('reportPreviousWeek')}</MenuItem>\n                  <MenuItem value='thisMonth'>{t('reportThisMonth')}</MenuItem>\n                  <MenuItem value='previousMonth'>{t('reportPreviousMonth')}</MenuItem>\n                  <MenuItem value='custom'>{t('reportCustom')}</MenuItem>\n                </Select>\n              </FormControl>\n              {period === 'custom' &&\n                <TextField\n                  margin='normal'\n                  variant='filled'\n                  label={t('reportFrom')}\n                  type='datetime-local'\n                  value={from.format(moment.HTML5_FMT.DATETIME_LOCAL)}\n                  onChange={(e) => setFrom(moment(e.target.value, moment.HTML5_FMT.DATETIME_LOCAL))}\n                  fullWidth />\n              }\n              {period === 'custom' &&\n                <TextField\n                  margin='normal'\n                  variant='filled'\n                  label={t('reportTo')}\n                  type='datetime-local'\n                  value={to.format(moment.HTML5_FMT.DATETIME_LOCAL)}\n                  onChange={(e) => setTo(moment(e.target.value, moment.HTML5_FMT.DATETIME_LOCAL))}\n                  fullWidth />\n              }\n              <FormControl margin='normal' fullWidth>\n                <Button type='button' color='primary' variant='contained' disabled={!deviceId} onClick={handleShow}>\n                  {t('reportShow')}\n                </Button>\n              </FormControl>\n            </Paper>\n          </Grid>\n          <Grid item xs={12} md={9} lg={10}>\n            <TableContainer component={Paper}>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>{t('positionFixTime')}</TableCell>\n                    <TableCell>{t('positionLatitude')}</TableCell>\n                    <TableCell>{t('positionLongitude')}</TableCell>\n                    <TableCell>{t('positionSpeed')}</TableCell>\n                    <TableCell>{t('positionAddress')}</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {data.map((item) => (\n                    <TableRow key={item.id}>\n                      <TableCell>{formatter(item, 'fixTime')}</TableCell>\n                      <TableCell>{formatter(item, 'latitude')}</TableCell>\n                      <TableCell>{formatter(item, 'longitude')}</TableCell>\n                      <TableCell>{formatter(item, 'speed')}</TableCell>\n                      <TableCell>{formatter(item, 'address')}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          </Grid>\n        </Grid>\n      </div>\n    </div>\n  );\n}\n\nexport default RouteReportPage;\n","import React, { useEffect, useState } from 'react';\nimport MainToobar from './MainToolbar';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Container from '@material-ui/core/Container';\nimport Button from '@material-ui/core/Button';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport t from './common/localization';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    marginTop: theme.spacing(2),\n  },\n  buttons: {\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    '& > *': {\n      flexBasis: '33%',\n    },\n  },\n}));\n\nconst DevicePage = () => {\n  const history = useHistory();\n  const classes = useStyles();\n  const { id } = useParams();\n  const [device, setDevice] = useState();\n  const [name, setName] = useState('');\n  const [uniqueId, setUniqueId] = useState('');\n\n  useEffect(() => {\n    fetch(`/api/devices/${id}`).then(response => {\n      if (response.ok) {\n        response.json().then(setDevice);\n      }\n    });\n  }, [id]);\n\n  const handleSave = () => {\n    const updatedDevice = id ? device : {};\n    updatedDevice.name = name || updatedDevice.name;\n    updatedDevice.uniqueId = uniqueId || updatedDevice.uniqueId;\n\n    let request;\n    if (id) {\n      request = fetch(`/api/devices/${id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(updatedDevice),\n      });\n    } else {\n      request = fetch('/api/devices', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(updatedDevice),\n      });\n    }\n\n    request.then(response => {\n      if (response.ok) {\n        history.goBack();\n      }\n    });\n  }\n\n  return (\n    <>\n      <MainToobar history={history} />\n      <Container maxWidth='xs' className={classes.container}>\n        <form>\n          {(!id || device) &&\n            <TextField\n              margin='normal'\n              fullWidth\n              defaultValue={device && device.name}\n              onChange={(event) => setName(event.target.value)}\n              label={t('sharedName')}\n              variant='filled' />\n          }\n          {(!id || device) &&\n            <TextField\n              margin='normal'\n              fullWidth\n              defaultValue={device && device.uniqueId}\n              onChange={(event) => setUniqueId(event.target.value)}\n              label={t('deviceIdentifier')}\n              variant='filled' />\n          }\n          <FormControl fullWidth margin='normal'>\n            <div className={classes.buttons}>\n              <Button type='button' color='primary' variant='outlined' onClick={() => history.goBack()}>\n                {t('sharedCancel')}\n              </Button>\n              <Button type='button' color='primary' variant='contained' onClick={handleSave}>\n                {t('sharedSave')}\n              </Button>\n            </div>\n          </FormControl>\n        </form>\n      </Container>\n    </>\n  );\n}\n\nexport default DevicePage;\n","import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { connect } from 'react-redux';\nimport { positionsActions, devicesActions, sessionActions } from './store';\nimport { useHistory } from 'react-router-dom';\n\nconst displayNotifications = events => {\n  if (\"Notification\" in window) {\n    if (Notification.permission === \"granted\") {\n      for (const event of events) {\n        const notification = new Notification(`Event: ${event.type}`);\n        setTimeout(notification.close.bind(notification), 4 * 1000);\n      }\n    } else if (Notification.permission !== \"denied\") {\n      Notification.requestPermission(permission => {\n        if (permission === \"granted\") {\n          displayNotifications(events);\n        }\n      });\n    }\n  }\n};\n\nconst SocketController = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const authenticated = useSelector(state => state.session.authenticated);\n\n  const connectSocket = () => {\n    const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n    const socket = new WebSocket(protocol + '//' + window.location.host + '/api/socket');\n\n    socket.onclose = () => {\n      setTimeout(() => connectSocket(), 60 * 1000);\n    };\n\n    socket.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      if (data.devices) {\n        dispatch(devicesActions.update(data.devices));\n      }\n      if (data.positions) {\n        dispatch(positionsActions.update(data.positions));\n      }\n      if (data.events) {\n        displayNotifications(data.events);\n      }\n    };\n  }\n\n  useEffect(() => {\n    if (authenticated) {\n      fetch('/api/devices').then(response => {\n        if (response.ok) {\n          response.json().then(devices => {\n            dispatch(devicesActions.update(devices));\n          });\n        }\n        connectSocket();\n      });\n    } else {\n      fetch('/api/session').then(response => {\n        if (response.ok) {\n          dispatch(sessionActions.authenticated(true));\n        } else {\n          history.push('/login');\n        }\n      });\n    }\n  }, [authenticated]);\n\n  return null;\n}\n\nexport default connect()(SocketController);\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom'\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport MainPage from './MainPage';\nimport LoginPage from './LoginPage';\nimport RouteReportPage from './reports/RouteReportPage';\nimport DevicePage from './DevicePage';\nimport SocketController from './SocketController';\n\nconst App = () => {\n  return (\n    <>\n      <CssBaseline />\n      <SocketController />\n      <Switch>\n        <Route exact path='/' component={MainPage} />\n        <Route exact path='/login' component={LoginPage} />\n        <Route exact path='/device/:id?' component={DevicePage} />\n        <Route exact path='/reports/route' component={RouteReportPage} />\n      </Switch>\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}","import 'typeface-roboto'\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport store from './store';\n\nReactDOM.render((\n  <Provider store={store}>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </Provider>\n), document.getElementById('root'));\n\nserviceWorker.register();\n"],"sourceRoot":""}